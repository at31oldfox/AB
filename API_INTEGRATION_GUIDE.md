# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ API

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–Ø —Å–æ–∑–¥–∞–ª –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π API —Å–ª–æ–π –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ª–µ–≥–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API. –í–æ—Ç —á—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API —Å–ª–æ—è

```
src/services/api/
‚îú‚îÄ‚îÄ config.ts          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API (URL, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ client.ts          # –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π axios –∫–ª–∏–µ–Ω—Ç —Å Basic Auth
‚îú‚îÄ‚îÄ api.ts             # –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API (–æ–±–Ω–æ–≤–ª–µ–Ω—ã)
‚îú‚îÄ‚îÄ hooks.ts           # React Query —Ö—É–∫–∏ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ utils.ts           # –£—Ç–∏–ª–∏—Ç—ã (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –≤–∞–ª–∏–¥–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ types.ts           # TypeScript —Ç–∏–ø—ã –¥–ª—è API
‚îú‚îÄ‚îÄ constants.ts       # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îú‚îÄ‚îÄ index.ts           # –≠–∫—Å–ø–æ—Ä—Ç—ã –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å–ª–æ—è
```

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API**
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `VITE_USE_MOCKS`
   - –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

2. **–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
   - Basic Auth —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" / ""
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

3. **React Query –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –ì–æ—Ç–æ–≤—ã–µ —Ö—É–∫–∏ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –æ—à–∏–±–æ–∫
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –õ–µ–≥–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL API

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env

```env
# API Configuration
VITE_API_URL=http://212.41.9.83/api/hs/v1/
VITE_USE_MOCKS=true

# API Authentication
VITE_API_USERNAME=–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
VITE_API_PASSWORD=

# API Timeout (in milliseconds)
VITE_API_TIMEOUT=30000
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

#### –í–∞—Ä–∏–∞–Ω—Ç 1: React Query —Ö—É–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```typescript
import { useCities, useBranches, useCreateBooking } from '@services/api'

function MyComponent() {
  const { data: cities, isLoading, error } = useCities()
  const { data: branches } = useBranches('–ú–æ—Å–∫–≤–∞')
  const createBooking = useCreateBooking()

  const handleBooking = () => {
    createBooking.mutate({
      branchId: '1',
      specialistId: '1',
      serviceIds: ['1.1'],
      date: '2024-02-25',
      time: '10:00',
      clientName: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
      clientPhone: '+7 (999) 123-45-67'
    })
  }

  if (isLoading) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  if (error) return <div>–û—à–∏–±–∫–∞: {error.message}</div>

  return (
    <div>
      {cities?.map(city => <div key={city}>{city}</div>)}
    </div>
  )
}
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã API

```typescript
import { fetchCities, fetchBranches, createBooking } from '@services/api'

// –í async —Ñ—É–Ω–∫—Ü–∏–∏
const cities = await fetchCities()
const branches = await fetchBranches('–ú–æ—Å–∫–≤–∞')
const result = await createBooking(bookingData)
```

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API

### –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–∫–æ–≤:
```env
VITE_USE_MOCKS=true
```

### –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ API:
```env
VITE_USE_MOCKS=false
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –§—É–Ω–∫—Ü–∏—è | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|----------|
| `fetchCities()` | `GET /cities` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ |
| `fetchBranches(city?)` | `GET /branches` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–ª–∏–∞–ª–æ–≤ |
| `fetchSpecialists(branchId, serviceIds?)` | `GET /specialists` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ |
| `fetchSpecialistDetails(id)` | `GET /specialists/{id}/details` | –î–µ—Ç–∞–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ |
| `fetchServices(branchId?, specialistId?)` | `GET /services` | –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Å–ª—É–≥ |
| `fetchAvailableDates(...)` | `GET /available-dates` | –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã |
| `fetchTimeSlots(...)` | `GET /time-slots` | –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã |
| `createBooking(data)` | `POST /bookings` | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ |

## üéØ React Query —Ö—É–∫–∏

–í—Å–µ —Ö—É–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ö—ç—à–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
- –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –∫—ç—à –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

```typescript
// –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ö—É–∫–∏
useCities()
useBranches(city?)
useSpecialists(branchId, serviceIds?)
useSpecialistDetails(id)
useServices(branchId?, specialistId?)
useAvailableDates(branchId, specialistId, serviceIds)
useTimeSlots(branchId, specialistId, serviceIds, date)
useCreateBooking()
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

- **–ì–æ—Ä–æ–¥–∞, —Ñ–∏–ª–∏–∞–ª—ã, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã**: 5 –º–∏–Ω—É—Ç
- **–£—Å–ª—É–≥–∏, –¥–µ—Ç–∞–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞**: 10 –º–∏–Ω—É—Ç  
- **–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã**: 2 –º–∏–Ω—É—Ç—ã
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã**: 1 –º–∏–Ω—É—Ç–∞

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏–µ URL API

### –°–ø–æ—Å–æ–± 1: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
VITE_API_URL=http://new-api-url.com/api/
```

### –°–ø–æ—Å–æ–± 2: –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ
```typescript
// src/services/api/config.ts
export const API_CONFIG = {
  BASE_URL: 'http://new-api-url.com/api/',
  // ...
}
```

## üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

API —Å–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- 401 - –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- 403 - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω  
- 404 - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- 500 - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
- –¢–∞–π–º–∞—É—Ç—ã

## üìù –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–°–æ–∑–¥–∞–Ω –ø—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `ApiExample.tsx`, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π API —Å–ª–æ—è.

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∞—Å–ø–µ–∫—Ç API –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
2. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å React Query
5. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
6. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

## üîÆ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API —Å–ª–æ–π —Å –º–æ–∫–∞–º–∏
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API, –∏–∑–º–µ–Ω–∏–≤ `VITE_USE_MOCKS=false`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ–¥ –≤–∞—à–µ —Ä–µ–∞–ª—å–Ω–æ–µ API
4. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

API —Å–ª–æ–π –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ